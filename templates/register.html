{% extends "layout.html" %}

{% block title %}
    Login
{% endblock %}

{% block main %}
    <form class="login" method="POST">
        <div class="form-group">
            <label for="email"><strong>Username</strong></label>
            <input type="text" class="form-control" name="username" onkeydown="validate_inputs()">
        </div>
        <div class="form-group">
            <label for="email"><strong>Email</strong></label>
            <div class="input-group-prepend">
                <span class="input-group-text">@</span>
                <input type="email" class="form-control" name="email" onkeydown="validate_inputs()">
            </div>
            
        </div>
        <div class="form-group">
            <label for="pwd"><strong>Password</strong></label>
            <input type="password" class="form-control" name="password" onkeydown="validate_inputs()">
        </div>
        <div class="form-group">
            <label for="pwd"><strong>Confirm Password</strong></label>
            <input type="password" class="form-control" name="confirmation" onkeydown="validate_inputs()">
        </div>
        <input id="submit_button" class="btn" type="submit" value="Submit">
        <div class="mx-auto ta-center fs-body1 p16 pb0 mb24 w100 wmx3">
            Already have an account? 
            <a href="/login">Login</a>
        </div>
    </form>

    <script>

        document.addEventListener("DOMContentLoaded", function(){
            
            validate_inputs()
        });

        function validate_inputs()
        {
            all_inputs = true;
            let button = document.getElementById("submit_button");
            button.disabled = true;
            let inputs = document.querySelectorAll(".form-control");
            for( let i=0; i < inputs.length; i++)
            {
                if (inputs[i].value === "")
                {
                    all_inputs = false;
                }
            }
            if (inputs[2].value !== inputs[3].value)
            {
                all_inputs = false;
            }
            if (all_inputs)
            {
                button.disabled = false;
            }
        }
    </script>
{% endblock %}